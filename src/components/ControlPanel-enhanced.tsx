import React, { useState, useCallback } from 'react';\nimport { motion, AnimatePresence } from 'framer-motion';\nimport {\n  Mic,\n  MicOff,\n  Video,\n  VideoOff,\n  PhoneOff,\n  ScreenShare,\n  ScreenShareOff,\n  Settings,\n  Users,\n  MessageSquare,\n  MoreVertical,\n  Volume2,\n  VolumeX,\n  Monitor,\n  MonitorOff,\n  Maximize,\n  Minimize,\n  Hand,\n  Filter,\n  Sparkles,\n  Zap,\n  Heart\n} from 'lucide-react';\n\ninterface ControlPanelProps {\n  isVideoEnabled: boolean;\n  isAudioEnabled: boolean;\n  isScreenSharing: boolean;\n  isChatOpen: boolean;\n  participantCount: number;\n  onVideoToggle: () => void;\n  onAudioToggle: () => void;\n  onScreenShareToggle: () => void;\n  onChatToggle: () => void;\n  onEndCall: () => void;\n  onSettingsOpen: () => void;\n}\n\nconst ControlPanel: React.FC<ControlPanelProps> = ({\n  isVideoEnabled,\n  isAudioEnabled,\n  isScreenSharing,\n  isChatOpen,\n  participantCount,\n  onVideoToggle,\n  onAudioToggle,\n  onScreenShareToggle,\n  onChatToggle,\n  onEndCall,\n  onSettingsOpen,\n}) => {\n  const [isExpanded, setIsExpanded] = useState(false);\n  const [isFullscreen, setIsFullscreen] = useState(false);\n  const [hasRaiseHand, setHasRaiseHand] = useState(false);\n  const [showReactions, setShowReactions] = useState(false);\n  const [volume, setVolume] = useState(80);\n  const [videoFilter, setVideoFilter] = useState('none');\n\n  const handleFullscreenToggle = useCallback(() => {\n    if (!document.fullscreenElement) {\n      document.documentElement.requestFullscreen();\n      setIsFullscreen(true);\n    } else {\n      document.exitFullscreen();\n      setIsFullscreen(false);\n    }\n  }, []);\n\n  const handleRaiseHand = useCallback(() => {\n    setHasRaiseHand(!hasRaiseHand);\n    // Show temporary feedback\n    setTimeout(() => {\n      if (hasRaiseHand) setHasRaiseHand(false);\n    }, 5000);\n  }, [hasRaiseHand]);\n\n  const reactions = ['â¤ï¸', 'ðŸ‘', 'ðŸ˜‚', 'ðŸ˜®', 'ðŸ˜¢', 'ðŸ‘'];\n\n  const handleReaction = (reaction: string) => {\n    // Handle reaction logic here\n    console.log('Reaction sent:', reaction);\n    setShowReactions(false);\n  };\n\n  const primaryControls = [\n    {\n      id: 'audio',\n      icon: isAudioEnabled ? Mic : MicOff,\n      isActive: isAudioEnabled,\n      onClick: onAudioToggle,\n      label: isAudioEnabled ? 'Mute' : 'Unmute',\n      gradient: isAudioEnabled ? 'from-green-500 to-emerald-500' : 'from-red-500 to-pink-500',\n      glowColor: isAudioEnabled ? 'shadow-glow-green' : 'shadow-glow-pink',\n    },\n    {\n      id: 'video',\n      icon: isVideoEnabled ? Video : VideoOff,\n      isActive: isVideoEnabled,\n      onClick: onVideoToggle,\n      label: isVideoEnabled ? 'Turn off video' : 'Turn on video',\n      gradient: isVideoEnabled ? 'from-blue-500 to-cyan-500' : 'from-gray-500 to-gray-600',\n      glowColor: isVideoEnabled ? 'shadow-glow-cyan' : 'shadow-glow-gray',\n    },\n    {\n      id: 'screen',\n      icon: isScreenSharing ? ScreenShareOff : ScreenShare,\n      isActive: isScreenSharing,\n      onClick: onScreenShareToggle,\n      label: isScreenSharing ? 'Stop sharing' : 'Share screen',\n      gradient: isScreenSharing ? 'from-orange-500 to-amber-500' : 'from-gray-500 to-gray-600',\n      glowColor: isScreenSharing ? 'shadow-glow-orange' : 'shadow-glow-gray',\n    },\n    {\n      id: 'end',\n      icon: PhoneOff,\n      isActive: false,\n      onClick: onEndCall,\n      label: 'End call',\n      gradient: 'from-red-600 to-red-700',\n      glowColor: 'shadow-glow-red',\n      special: true,\n    },\n  ];\n\n  const secondaryControls = [\n    {\n      id: 'chat',\n      icon: MessageSquare,\n      isActive: isChatOpen,\n      onClick: onChatToggle,\n      label: 'Chat',\n      count: isChatOpen ? undefined : 3,\n    },\n    {\n      id: 'participants',\n      icon: Users,\n      isActive: false,\n      onClick: () => {},\n      label: 'Participants',\n      count: participantCount,\n    },\n    {\n      id: 'hand',\n      icon: Hand,\n      isActive: hasRaiseHand,\n      onClick: handleRaiseHand,\n      label: hasRaiseHand ? 'Lower hand' : 'Raise hand',\n    },\n    {\n      id: 'reactions',\n      icon: Heart,\n      isActive: showReactions,\n      onClick: () => setShowReactions(!showReactions),\n      label: 'Reactions',\n    },\n    {\n      id: 'fullscreen',\n      icon: isFullscreen ? Minimize : Maximize,\n      isActive: isFullscreen,\n      onClick: handleFullscreenToggle,\n      label: isFullscreen ? 'Exit fullscreen' : 'Fullscreen',\n    },\n    {\n      id: 'settings',\n      icon: Settings,\n      isActive: false,\n      onClick: onSettingsOpen,\n      label: 'Settings',\n    },\n  ];\n\n  return (\n    <div className=\"relative\">\n      {/* Main Control Panel */}\n      <motion.div\n        initial={{ y: 100, opacity: 0 }}\n        animate={{ y: 0, opacity: 1 }}\n        transition={{ type: 'spring', stiffness: 300, damping: 30 }}\n        className=\"fixed bottom-6 left-1/2 transform -translate-x-1/2 z-50\"\n      >\n        <div className=\"glass-card rounded-2xl p-4 border border-white/20 backdrop-blur-2xl\">\n          <div className=\"flex items-center gap-3\">\n            {/* Primary Controls */}\n            {primaryControls.map((control) => {\n              const IconComponent = control.icon;\n              return (\n                <motion.button\n                  key={control.id}\n                  whileHover={{ scale: 1.1, y: -2 }}\n                  whileTap={{ scale: 0.9 }}\n                  onClick={control.onClick}\n                  className={`\n                    relative p-4 rounded-xl transition-all duration-300 group\n                    ${\n                      control.special\n                        ? 'bg-gradient-to-r from-red-500 to-pink-500 text-white shadow-glow-pink'\n                        : control.isActive && control.id !== 'end'\n                        ? `bg-gradient-to-r ${control.gradient} text-white ${control.glowColor}`\n                        : 'bg-white/10 text-white hover:bg-white/20'\n                    }\n                  `}\n                  title={control.label}\n                >\n                  <motion.div\n                    animate={{\n                      rotate: control.special ? [0, 10, -10, 0] : 0,\n                      scale: control.isActive && control.id !== 'end' ? 1.1 : 1,\n                    }}\n                    transition={{\n                      rotate: { duration: 0.5, repeat: control.special ? Infinity : 0, repeatDelay: 2 },\n                      scale: { duration: 0.2 },\n                    }}\n                  >\n                    <IconComponent size={20} className=\"icon-interactive\" />\n                  </motion.div>\n\n                  {/* Active indicator */}\n                  {control.isActive && control.id !== 'end' && (\n                    <motion.div\n                      initial={{ scale: 0 }}\n                      animate={{ scale: 1 }}\n                      className=\"absolute -top-1 -right-1 w-3 h-3 bg-green-500 rounded-full border-2 border-white\"\n                    />\n                  )}\n                </motion.button>\n              );\n            })}\n\n            {/* Divider */}\n            <div className=\"w-px h-8 bg-white/20 mx-2\" />\n\n            {/* Secondary Controls Toggle */}\n            <motion.button\n              whileHover={{ scale: 1.05 }}\n              whileTap={{ scale: 0.95 }}\n              onClick={() => setIsExpanded(!isExpanded)}\n              className=\"control-button p-3\"\n            >\n              <motion.div\n                animate={{ rotate: isExpanded ? 180 : 0 }}\n                transition={{ duration: 0.3 }}\n              >\n                <MoreVertical size={16} />\n              </motion.div>\n            </motion.button>\n          </div>\n        </div>\n      </motion.div>\n\n      {/* Expanded Secondary Controls */}\n      <AnimatePresence>\n        {isExpanded && (\n          <motion.div\n            initial={{ y: 100, opacity: 0, scale: 0.9 }}\n            animate={{ y: 0, opacity: 1, scale: 1 }}\n            exit={{ y: 100, opacity: 0, scale: 0.9 }}\n            transition={{ type: 'spring', stiffness: 300, damping: 30 }}\n            className=\"fixed bottom-28 left-1/2 transform -translate-x-1/2 z-40\"\n          >\n            <div className=\"glass-card rounded-2xl p-4 border border-white/20\">\n              <div className=\"grid grid-cols-6 gap-2\">\n                {secondaryControls.map((control, index) => {\n                  const IconComponent = control.icon;\n                  return (\n                    <motion.button\n                      key={control.id}\n                      initial={{ y: 20, opacity: 0 }}\n                      animate={{ y: 0, opacity: 1 }}\n                      transition={{ delay: index * 0.05 }}\n                      whileHover={{ scale: 1.05, y: -2 }}\n                      whileTap={{ scale: 0.95 }}\n                      onClick={control.onClick}\n                      className={`\n                        relative p-3 rounded-xl transition-all duration-300 group min-w-[3rem] min-h-[3rem] flex items-center justify-center\n                        ${\n                          control.isActive\n                            ? 'bg-gradient-to-r from-purple-500 to-pink-500 text-white shadow-glow-purple'\n                            : 'bg-white/10 text-white hover:bg-white/20'\n                        }\n                      `}\n                      title={control.label}\n                    >\n                      <IconComponent size={16} className=\"icon-interactive\" />\n                      \n                      {/* Count badge */}\n                      {control.count && (\n                        <motion.div\n                          initial={{ scale: 0 }}\n                          animate={{ scale: 1 }}\n                          className=\"absolute -top-1 -right-1 w-5 h-5 bg-gradient-to-r from-red-500 to-pink-500 text-white text-xs rounded-full flex items-center justify-center font-bold\"\n                        >\n                          {control.count}\n                        </motion.div>\n                      )}\n                    </motion.button>\n                  );\n                })}\n              </div>\n            </div>\n          </motion.div>\n        )}\n      </AnimatePresence>\n\n      {/* Reactions Popup */}\n      <AnimatePresence>\n        {showReactions && (\n          <motion.div\n            initial={{ scale: 0, opacity: 0, y: 20 }}\n            animate={{ scale: 1, opacity: 1, y: 0 }}\n            exit={{ scale: 0, opacity: 0, y: 20 }}\n            transition={{ type: 'spring', stiffness: 300, damping: 30 }}\n            className=\"fixed bottom-52 left-1/2 transform -translate-x-1/2 z-60\"\n          >\n            <div className=\"glass-card rounded-2xl p-4 border border-white/20\">\n              <div className=\"flex gap-2\">\n                {reactions.map((reaction, index) => (\n                  <motion.button\n                    key={reaction}\n                    initial={{ scale: 0 }}\n                    animate={{ scale: 1 }}\n                    transition={{ delay: index * 0.05 }}\n                    whileHover={{ scale: 1.2, y: -4 }}\n                    whileTap={{ scale: 0.9 }}\n                    onClick={() => handleReaction(reaction)}\n                    className=\"text-2xl p-2 rounded-lg hover:bg-white/10 transition-all duration-200\"\n                  >\n                    {reaction}\n                  </motion.button>\n                ))}\n              </div>\n            </div>\n          </motion.div>\n        )}\n      </AnimatePresence>\n\n      {/* Volume Control (when expanded) */}\n      <AnimatePresence>\n        {isExpanded && (\n          <motion.div\n            initial={{ x: -100, opacity: 0 }}\n            animate={{ x: 0, opacity: 1 }}\n            exit={{ x: -100, opacity: 0 }}\n            transition={{ delay: 0.2 }}\n            className=\"fixed bottom-6 left-6 z-40\"\n          >\n            <div className=\"glass-card rounded-2xl p-4 border border-white/20\">\n              <div className=\"flex items-center gap-3\">\n                <button className=\"control-button p-2\">\n                  {volume > 0 ? <Volume2 size={16} /> : <VolumeX size={16} />}\n                </button>\n                <input\n                  type=\"range\"\n                  min=\"0\"\n                  max=\"100\"\n                  value={volume}\n                  onChange={(e) => setVolume(Number(e.target.value))}\n                  className=\"w-20 h-1 bg-white/20 rounded-lg appearance-none slider\"\n                />\n                <span className=\"text-xs text-white/80 w-8\">{volume}%</span>\n              </div>\n            </div>\n          </motion.div>\n        )}\n      </AnimatePresence>\n\n      {/* Video Filters (when expanded) */}\n      <AnimatePresence>\n        {isExpanded && (\n          <motion.div\n            initial={{ x: 100, opacity: 0 }}\n            animate={{ x: 0, opacity: 1 }}\n            exit={{ x: 100, opacity: 0 }}\n            transition={{ delay: 0.3 }}\n            className=\"fixed bottom-6 right-6 z-40\"\n          >\n            <div className=\"glass-card rounded-2xl p-4 border border-white/20\">\n              <div className=\"flex items-center gap-2\">\n                <Sparkles size={16} className=\"text-white\" />\n                <select\n                  value={videoFilter}\n                  onChange={(e) => setVideoFilter(e.target.value)}\n                  className=\"bg-white/10 text-white text-sm rounded-lg border border-white/20 px-3 py-1 focus:outline-none focus:ring-2 focus:ring-purple-500\"\n                >\n                  <option value=\"none\">No Filter</option>\n                  <option value=\"blur\">Blur Background</option>\n                  <option value=\"vintage\">Vintage</option>\n                  <option value=\"warm\">Warm</option>\n                  <option value=\"cool\">Cool</option>\n                </select>\n              </div>\n            </div>\n          </motion.div>\n        )}\n      </AnimatePresence>\n\n      {/* Raised Hand Indicator */}\n      <AnimatePresence>\n        {hasRaiseHand && (\n          <motion.div\n            initial={{ scale: 0, y: 50 }}\n            animate={{ scale: 1, y: 0 }}\n            exit={{ scale: 0, y: 50 }}\n            className=\"fixed top-32 right-6 z-50\"\n          >\n            <div className=\"bg-gradient-to-r from-yellow-400 to-orange-500 text-white px-4 py-2 rounded-xl flex items-center gap-2 shadow-glow-orange\">\n              <Hand size={16} className=\"animate-bounce\" />\n              <span className=\"text-sm font-medium\">Hand Raised</span>\n            </div>\n          </motion.div>\n        )}\n      </AnimatePresence>\n    </div>\n  );\n};\n\nexport default ControlPanel;